import json
import os

import google.generativeai as genai

genai.configure(api_key=os.getenv("GOOGLEAI_API_KEY"))
disclaimer = "\n<i>Generated by AI (Google Gemini 1.5)</i>"
error_message = "<i>This feature is temporarily unavailable</i>"


def explainSong(lyrics):
    response = ""
    try:
        model = genai.GenerativeModel("gemini-1.5-flash")
        response = model.generate_content(
            ["Explain this hymn in up to 7 lines", lyrics]
        ).text
        response += disclaimer
    except:
        return error_message
    return response
